{
    admin off
    persist_config off
    auto_https off

    log {
        format json
    }

    servers {
        trusted_proxies static private_ranges 100.0.0.0/8

        # âœ… Force Caddy to bind to all interfaces on the port Railway injects
        listener_wrappers {
            bind 0.0.0.0
        }
    }
}

:{$PORT:3000} {
    log {
        format json
    }

    rewrite /health /*

    root * /app/dist
    encode gzip
    file_server

    try_files {path} /index.html
}
